!function(e){"use strict";e.module("akit.component.chatservicerButton",[])}(window.angular),function(e){"use strict";e.module("akit.component.chatservicerButton",[])}(window.angular),function(e){"use strict";e.module("akit.component.chatservicerButton").constant("akit.component.chatservicerButton.chatproxyConfig",{chatproxyServiceUrl:"/srv/chatproxy/d/"})}(window.angular),function(e){"use strict";e.module("akit.component.chatservicerButton").controller("akit.component.chatservicerButton.chatservicerButtonController",["$scope","$timeout","akit.component.chatservicerButto.chatproxyService",function(e,t,n){function a(){n.getAvailability(e.entitykey).then(function(e){s.available=e.data.available,p=0,i()})["catch"](function(e){s.available=!1,p+=1,i(2*p*u)})}function i(e){e=e||u,c(),l=t(a,e)}function c(){t.cancel(l)}function o(){var t=n.getChatURL(e.entitykey);return t.data.url}function r(){var e=o()||!1;if(!s.chatWindow.closed)return void s.chatWindow.focus();if(s.disabled=!1,s.available)if(e){c();var t=e,n="chatservicer_window",a="width=640,height=480,resizable,scrollbars=yes,status=1";s.chatWindow=window.open(t,n,a),s.disabled=!0}else s.occupied=!0,s.popupOpen=!s.popupOpen,s.available=!1,i(5e3);else s.popupOpen&&s.occupied?s.popupOpen=!1:(s.occupied=!1,s.popupOpen=!s.popupOpen)}var l,s=this,u=1e3,p=0;s.chatWindow={closed:!0},s.available,s.disabled=!1,s.occupied=!1,s.popupOpen=!1,s.clickHandler=r,s.nextPoll=i,s.cancelPoll=c,s.getChatAvailability=a}])}(window.angular),function(e){"use strict";e.module("akit.component.chatservicerButton").directive("chatservicerButton",["$timeout","$window",function(e,t){return{restrict:"AE",replace:!0,templateUrl:"/assets/chatservicer-button/views/directives/chatservicer-button.htm",controller:"akit.component.chatservicerButton.chatservicerButtonController",controllerAs:"chatservicer",scope:{entitykey:"@"},link:function(n,a,i,c){function o(){c.popupOpen&&(c.popupOpen=!1)}function r(){c.getChatAvailability(),o()}n.$watch("chatservicer.available",function(e,t){e===t||c.disabled||(!c.occupied||c.occupied&&e===!0)&&(o(),c.nextPoll(2e3))}),n.$on("$destroy",function(){c.chatWindow.closed||c.chatWindow.close(),c.cancelPoll()}),t.addEventListener("focus",function(){e(function(){c.chatWindow.closed&&(c.disabled=!1,c.nextPoll())})}),r()}}}])}(window.angular),function(e){"use strict";e.module("akit.component.chatservicerButton").service("akit.component.chatservicerButto.chatproxyService",["$http","$interval","$q","akit.component.chatservicerButton.chatproxyConfig",function(e,t,n,a){function i(e){function t(e){var t=n.defer();return e.success?t.resolve(e):t.reject(e),t.promise}return t(l)}function c(e){return{success:!1,data:{url:"http://www.google.be"}}}var o={},r=10,l={success:!0,data:{available:!0}};return t(function(){var e=!l.data.available;l.data.available=e},1e3*r),o.getAvailability=i,o.getChatURL=c,o}])}(window.angular),angular.module("akit.component.chatservicerButton").run(["$templateCache",function(e){e.put("/assets/chatservicer-button/views/directives/chatservicer-button.htm",'<div class="chatservicer-button">\n    <button type="button"\n            class="button has-icon"\n            ng-class="{\'success\': chatservicer.available}"\n            ng-click="chatservicer.clickHandler()">\n        <span class="fa fa-comments"></span>\n        <span ng-if="chatservicer.available">\n            <span translate>Chat met een medewerker</span>\n        </span>\n        <span ng-if="!chatservicer.available">\n            <span translate>Hulp nodig bij het invullen?</span>\n        </span>\n    </button>\n\n    <div class="chatservicer-button__popup"\n         ng-class="{\'is-open\': chatservicer.popupOpen}">\n        <div ng-if="!chatservicer.available && !chatservicer.occupied">\n            <p translate>\n                Elke werkdag (van maandag tot en met vrijdag) kan je tussen 9u en 17u online hulp inroepen bij het invullen van een formulier in het e-loket. Je kan een (video)chat starten met een medewerker. De medewerker zal je stap voor stap begeleiden bij het invullen van het formulier. Hij zal het formulier niet voor jou invullen.\n            </p>\n        </div>\n        <div ng-if="chatservicer.occupied">\n            <p translate>Al onze medewerkers zijn momenteel onbeschikbaar. Gelieve later opnieuw te proberen.</p>\n        </div>\n    </div>\n</div>')}]);
//# sourceMappingURL=akit.component.chatservicer-button.min.js.map
