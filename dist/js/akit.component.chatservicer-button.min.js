!function(e){"use strict";e.module("akit.component.chatservicerButton",[])}(window.angular),function(e){"use strict";e.module("akit.component.chatservicerButton",[])}(window.angular),function(e){"use strict";e.module("akit.component.chatservicerButton").constant("akit.component.chatservicerButton.chatproxyConfig",{chatproxyServiceUrl:"/srv/chatproxy/d/"})}(window.angular),function(e){"use strict";e.module("akit.component.chatservicerButton").controller("akit.component.chatservicerButton.chatservicerButtonController",["$scope","$timeout","akit.component.chatservicerButto.chatproxyService",function(e,t,n){function a(){n.getAvailability(e.entitykey).then(function(e){p.available=e.data.available,h=0,i()})["catch"](function(e){p.available=!1,h+=1,i(2*h*v)})}function i(e){e=e||v,c(),l=t(a,e)}function c(){t.cancel(l)}function r(){var t=n.getChatURL(e.entitykey);return t.success}function o(){var t=n.getChatURL(e.entitykey);return t.data.url}function s(){var e=r();if(u&&!u.closed)return void u.focus();if(p.available)if(e){var t=o(),n="Chatservicer_window",a="width=640,height=480,resizable,scrollbars=yes,status=1";u=window.open(t,n,a)}else p.occupied=!0,p.popupOpen=!p.popupOpen,p.available=!1;else p.popupOpen&&!e?p.popupOpen=!1:(p.occupied=!1,p.popupOpen=!p.popupOpen)}var u,l,p=this,v=1e3,h=0;p.available,p.occupied=!1,p.popupOpen=!1,p.buttonClick=s,p.cancelPoll=c,p.getChatAvailability=a}])}(window.angular),function(e){"use strict";e.module("akit.component.chatservicerButton").directive("chatservicerButton",[function(){return{restrict:"AE",replace:!0,templateUrl:"/assets/chatservicer-button/views/directives/chatservicer-button.htm",controller:"akit.component.chatservicerButton.chatservicerButtonController",controllerAs:"chatservicer",scope:{entitykey:"@"},link:function(e,t,n,a){function i(){a.popupOpen&&(a.popupOpen=!1)}function c(){a.getChatAvailability(),i()}e.$watch("chatservicer.available",function(e,t){var n=e!==t&&!a.occupied,c=e!==t&&e===!0&&a.occupied;(n||c)&&i()}),e.$on("$destroy",function(){a.cancelPoll()}),c()}}}])}(window.angular),function(e){"use strict";e.module("akit.component.chatservicerButton").service("akit.component.chatservicerButto.chatproxyService",["$http","$interval","$q","akit.component.chatservicerButton.chatproxyConfig",function(e,t,n,a){function i(e){function t(e){var t=n.defer();return e.success?t.resolve(e):t.reject(e),t.promise}return t(s)}function c(e){return{success:!1,data:{url:"http://www.google.be"}}}var r={},o=10,s={success:!0,data:{available:!0}};return t(function(){var e=!s.data.available;s.data.available=e},1e3*o),r.getAvailability=i,r.getChatURL=c,r}])}(window.angular),angular.module("akit.component.chatservicerButton").run(["$templateCache",function(e){e.put("/assets/chatservicer-button/views/directives/chatservicer-button.htm",'<div class="chatservicer-button">\n    <button type="button"\n            class="button has-icon"\n            ng-class="{\'success\': chatservicer.available}"\n            ng-click="chatservicer.buttonClick()">\n        <span class="fa fa-comments"></span>\n        <span ng-if="chatservicer.available">\n            <span translate>Chat met een medewerker</span>\n        </span>\n        <span ng-if="!chatservicer.available">\n            <span translate>Hulp nodig bij het invullen?</span>\n        </span>\n    </button>\n\n    <div class="chatservicer-button__popup"\n         ng-class="{\'is-open\': chatservicer.popupOpen}">\n        <div ng-if="!chatservicer.available && !chatservicer.occupied">\n            <p translate>\n                Elke werkdag (van maandag tot en met vrijdag) kan je tussen 9u en 17u online hulp inroepen bij het invullen van een formulier in het e-loket. Je kan een (video)chat starten met een medewerker. De medewerker zal je stap voor stap begeleiden bij het invullen van het formulier. Hij zal het formulier niet voor jou invullen.\n            </p>\n        </div>\n        <div ng-if="chatservicer.occupied">\n            <p translate>Al onze medewerkers zijn momenteel onbeschikbaar. Gelieve later opnieuw te proberen.</p>\n        </div>\n    </div>\n</div>')}]);
//# sourceMappingURL=akit.component.chatservicer-button.min.js.map
