!function(t){"use strict";window.angular.module("akit.component.chatbotWidget",[])}(),function(t){"use strict";window.angular.module("akit.component.chatbotWidget",[])}(),function(t){"use strict";window.angular.module("akit.component.chatbotWidget").controller("akit.component.chatbotWidget.chatbotMessageController",["$scope","$timeout",function(e){this.data=e.data||{hide:!0},this.sendReply=function(t){e.$emit("chatbotMessageReplyClicked",{message:t}),e.data.hide=!0}}])}(),function(t){"use strict";window.angular.module("akit.component.chatbotWidget").controller("akit.component.chatbotWidget.chatbotWidgetController",["$scope","$timeout","akit.component.chatbotWidget.chatbotService",function(t,a,e){this.pinned="false"!==t.pinned&&!!t.pinned,this.pinnedText=t.pinnedText||"Een vraag stellen",this.placeholder=t.placeholder||"",this.delay=t.delay||400,this.height=t.height||400,this.title=t.title||"",this.session=t.session,t.focusTextInput=!1;var n=this;n.data=[],n.message={session_id:this.session,message:"",type:"text",send:!0},n.isLoading=!1,n.isOpen=!1,n.sendMessage=function(){n.message.message&&(n.isLoading=!0,n.addToChat(n.message),e.sendMessage(t.url,n.message).then(function(t){if(!t.data)throw new Error("no data returned from service");t.data.forEach(function(t,e){a(function(){n.addToChat(t)},e*n.delay)}),n.isLoading=!1}).catch(function(t){n.pushError(t),n.isLoading=!1}),this.message.message="",t.focusTextInput=!0)},n.toggleChatbot=function(){this.isOpen=!this.isOpen,this.isOpen&&a(function(){t.focusTextInput=!0})},n.sendReply=function(t){n.message.message=t.message,n.sendMessage()},n.onInputKey=function(t){13===t.which&&n.sendMessage()},t.$on("chatbotMessageReplyClicked",n.sendReply),n.addToChat=function(t){var e=[].concat(n.data,[Object.assign({},t)]);this.data=e},n.pushError=function(t){var e={message:"Error "+t.status+" - "+t.statusText+": "+t.error.title,type:"error"};this.addToChat(e)}}])}(),function(t){"use strict";window.angular.module("akit.component.chatbotWidget").directive("auiChatbotMessage",["$timeout","$window",function(t,e){return{restrict:"E",replace:!0,templateUrl:"/assets/chatbot-widget/views/directives/chatbot-message.htm",controller:"akit.component.chatbotWidget.chatbotMessageController",controllerAs:"msg",scope:{data:"="}}}])}(),function(t){"use strict";window.angular.module("akit.component.chatbotWidget").directive("auiChatbotWidget",[function(){return{restrict:"AE",replace:!0,templateUrl:"/assets/chatbot-widget/views/directives/chatbot-widget.htm",controller:"akit.component.chatbotWidget.chatbotWidgetController",controllerAs:"chatbot",scope:{url:"@",session:"@",title:"@",pinned:"@?",pinnedText:"@?",placeholder:"@?",delay:"@?",height:"@?"},link:function(t,e,a,n){}}}])}(),function(t){"use strict";window.angular.module("akit.component.chatbotWidget").directive("focusFrom",["$timeout","$parse",function(s,t){return{restrict:"A",link:function(e,a,n){e.$watch(n.focusFrom,function(t){t&&(s(function(){a[0].focus()}),e.$parent[n.focusFrom]=!1)})}}}])}(),function(t){"use strict";window.angular.module("akit.component.chatbotWidget").directive("scrollToBottom",function(n,t){return{scope:{scrollToBottom:"="},restrict:"A",link:function(t,e,a){t.$watchCollection("scrollToBottom",function(t){t&&n(function(){e[0].scrollTop=e[0].scrollHeight},0)})}}})}(),function(t){"use strict";window.angular.module("akit.component.chatbotWidget").service("akit.component.chatbotWidget.chatbotService",["$http","$interval","$q",function(a){var t={};return t.sendMessage=function(t,e){return a.post(t,Object.assign({},e)).then(function(t){return t.data})},t}])}(),angular.module("akit.component.chatbotWidget").run(["$templateCache",function(t){t.put("/assets/chatbot-widget/views/directives/chatbot-message.htm",'<div><div class="m-message" ng-if="!msg.data.hide"><div ng-switch="msg.data.type" ng-class="{\'m-message--right\': msg.data.send, \'m-message--center\': msg.data.type === \'radio\' || msg.data.type === \'error\'}" class="m-message__content"><span ng-switch-when="text" class="m-message__text">{{ msg.data.message }}</span><span ng-switch-when="url" class="m-message__url"><a ng-href="{{ msg.data.url }}" target="_blank" rel="external">{{ msg.data.message }}</a></span><span ng-switch-when="image" class="m-message__image"><img ng-src="{{ msg.data.image }}"></span><span ng-switch-when="radio" class="m-message__radio"><ng-container ng-repeat="element in msg.data.elements"><button ng-click="msg.sendReply(element.replyText)" class="a-button a-button--small">{{ element.text }}</button></ng-container></span><span ng-switch-when="error" class="m-message__error u-text-danger">{{ msg.data.message }}</span></div></div></div>'),t.put("/assets/chatbot-widget/views/directives/chatbot-widget.htm",'<div class="o-chatbot" ng-class="{\'o-chatbot--pinned\': chatbot.pinned}" ng-style="{\'height\':!chatbot.pinned ? chatbot.height + \'px\' : \'\' }"><div class="o-chatbot__content" ng-if="!chatbot.pinned || (chatbot.pinned && chatbot.isOpen)"><div class="o-chatbot__header bg-primary u-text-xlight" ng-class="{\'o-chatbot__header--no-title\': !chatbot.title}"><h6 class="h6 has-base-font u-text-bold u-margin-xs" ng-if="chatbot.title">{{ chatbot.title }}</h6><button class="button icon" ng-if="chatbot.pinned" ng-click="chatbot.toggleChatbot()"><i class="fa fa-close"></i></button></div><div class="o-chatbot__main" scroll-to-bottom="chatbot.data"><div ng-if="chatbot.data && (chatbot.data.length > 0)" class="u-margin-xs"><ng-container ng-repeat="message in chatbot.data"><aui-chatbot-message data="message"></aui-chatbot-message></ng-container><div ng-if="chatbot.isLoading" class="o-chatbot__loader"><span>...</span></div></div></div><div class="o-chatbot__footer bg-light"><div class="o-chatbot__input u-margin-xs"><input type="text" class="field" id="chat-input" name="chat-input" autocomplete="off" placeholder="{{ chatbot.placeholder }}" focus-from="focusTextInput" ng-model="chatbot.message.message" ng-keypress="chatbot.onInputKey($event)"><button class="button transparent icon" ng-click="chatbot.sendMessage()"><i class="fa fa-send"></i></button></div></div></div><div class="o-chatbot__buttons" ng-if="chatbot.pinned && !chatbot.isOpen"><button ng-click="chatbot.toggleChatbot()" class="button has-icon"><i class="fa fa-comments"></i>{{ chatbot.pinnedText }}</button></div></div>')}]);
//# sourceMappingURL=akit.component.chatbot-widget.min.js.map
